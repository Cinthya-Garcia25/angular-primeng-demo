<section class="user-wrapper">
  <p-toast />
  <p-card styleClass="user-card">
    <ng-template #title>Perfil de usuario</ng-template>
    <p class="subtitle">Actualiza tu informacion con los mismos datos solicitados en el registro.</p>

    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()" class="form-grid">
      <label for="username">Usuario</label>
      <input pInputText id="username" type="text" placeholder="usuario123" formControlName="username" />
      @if (controlHasError('username')) {
        <p-message severity="error" text="Usuario requerido (minimo 3 caracteres)." />
      }

      <label for="email">Email</label>
      <input pInputText id="email" type="email" placeholder="correo@ejemplo.com" formControlName="email" />
      @if (controlHasError('email')) {
        <p-message severity="error" text="Email requerido y valido." />
      }

      <label for="phone">Telefono (10 digitos)</label>
      <input
        pInputText
        id="phone"
        type="text"
        pKeyFilter="int"
        maxlength="10"
        placeholder="Solo numeros"
        formControlName="phone"
      />
      @if (controlHasError('phone')) {
        <p-message severity="error" text="Telefono valido: solo numeros y 10 digitos." />
      }

      <label for="password">Contrasena</label>
      <p-password
        inputId="password"
        [feedback]="false"
        [toggleMask]="true"
        placeholder="********"
        formControlName="password"
      />
      @if (controlHasError('password')) {
        <p-message severity="error" text="Minimo 10 caracteres y 1 simbolo especial." />
      }

      <label for="confirmPassword">Confirmar contrasena</label>
      <p-password
        inputId="confirmPassword"
        [feedback]="false"
        [toggleMask]="true"
        placeholder="********"
        formControlName="confirmPassword"
      />
      @if (controlHasError('confirmPassword')) {
        <p-message severity="error" text="Debes confirmar la contrasena." />
      }
      @if (hasPasswordMismatch) {
        <p-message severity="error" text="La confirmacion no coincide con la contrasena." />
      }

      <label for="fullName">Nombre completo</label>
      <input pInputText id="fullName" type="text" placeholder="Tu nombre completo" formControlName="fullName" />
      @if (controlHasError('fullName')) {
        <p-message severity="error" text="Nombre completo requerido (minimo 5 caracteres)." />
      }

      <label for="address">Direccion</label>
      <input pInputText id="address" type="text" placeholder="Tu direccion" formControlName="address" />
      @if (controlHasError('address')) {
        <p-message severity="error" text="Direccion requerida (minimo 10 caracteres)." />
      }

      <p-checkbox
        inputId="isAdult"
        formControlName="isAdult"
        [binary]="true"
        label="Confirmo que soy mayor de edad y asumo esta responsabilidad."
      />
      @if (controlHasError('isAdult')) {
        <p-message severity="error" text="Debes confirmar mayoria de edad para guardar tu perfil." />
      }

      <div class="actions">
        <button pButton type="submit" label="Guardar perfil" icon="pi pi-save" [disabled]="profileForm.invalid"></button>
      </div>
    </form>
  </p-card>
</section>
